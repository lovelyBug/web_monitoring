!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){var n=["JS_ERROR","CUSTOMER_PV"];class r{static getUuid(){var e=r.formatDate((new Date).getTime(),"yMdhms");return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))+"-"+e}static getCustomerKey(){var e=r.getUuid(),t=wx.getStorageSync("monitorCustomerKey");return t||(wx.setStorage({key:"monitorCustomerKey",data:e}),t=e),t}static isTodayBrowse(e){var t=wx.getStorageSync(e),n=(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate();return t&&n==t?!(!t||n!=t):(wx.setStorageSync(e,n),!1)}static formatDate(e,t){var n=new Date(e).getFullYear(),r=new Date(e).getMonth()+1,o=new Date(e).getDate(),a=new Date(e).getHours(),i=new Date(e).getMinutes(),s=new Date(e).getSeconds();return r=r>9?r:"0"+r,o=o>9?o:"0"+o,a=a>9?a:"0"+a,i=i>9?i:"0"+i,s=s>9?s:"0"+s,t.replace("y",n).replace("M",r).replace("d",o).replace("h",a).replace("m",i).replace("s",s)}static getPageKey(){var e=wx.getStorageSync("monitorPageKey"),t=r.getUuid();return e&&/^[0-9a-z]{8}(-[0-9a-z]{4}){3}-[0-9a-z]{12}-\d{13}$/.test(e)||(e=t),e}static setPageKey(){wx.setStorage({key:"monitorPageKey",data:r.getUuid()})}static ajax(e,t,n,r,o){wx.request({method:e,url:t,data:n,header:{"Content-Type":"application/json"},success:e=>{"function"==typeof r&&r(e)},fail:e=>{"function"==typeof o&&o(e)}})}static encryptObj(e){if(e instanceof Array){for(var t=[],n=0;n<e.length;++n)t[n]=r.encryptObj(e[n]);return t}if(e instanceof Object){t={};for(var n in e)t[n]=r.encryptObj(e[n]);return t}return(e+="").length>50&&(e=e.substring(0,10)+"****"+e.substring(e.length-9,e.length)),e}static getDevice(){return wx.getSystemInfoSync()}static b64EncodeUnicode(e){var t,n,o,a,i,s,c,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g=e,h="",f=0;for(g=r.utf8_encode(g);f<g.length;)a=(t=g.charCodeAt(f++))>>2,i=(3&t)<<4|(n=g.charCodeAt(f++))>>4,s=(15&n)<<2|(o=g.charCodeAt(f++))>>6,c=63&o,isNaN(n)?s=c=64:isNaN(o)&&(c=64),h=h+u.charAt(a)+u.charAt(i)+u.charAt(s)+u.charAt(c);return h}static utf8_encode(e){var t="";e=e.replace(/\r\n/g,"\n");for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}}class o{constructor(){var e=wx.getStorageSync("wmUserInfo"),t=e?JSON.parse(e):{},n=getCurrentPages().length?getCurrentPages()[0].route:"App Launched";this.wmVersion="webfunnyVersionFlag",this.happenTime=(new Date).getTime(),this.webMonitorId="jeffery_webmonitor",this.simpleUrl=n,this.completeUrl=n,this.customerKey=r.getCustomerKey(),this.userId=t.userId,this.projectVersion=t.projectVersion||"",this.firstUserParam=r.b64EncodeUnicode(encodeURIComponent(t.userTag||"")),this.secondUserParam=r.b64EncodeUnicode(t.secondUserParam||"")}handleLogInfo(e,t){var n=wx.getStorageSync(e),r=n||[];r.push(t),wx.setStorage({data:r,key:e})}}class a extends o{constructor(e,t,n,o){super();var a=r.getDevice();this.uploadType="CUSTOMER_PV",this.pageKey=r.getPageKey(),this.deviceName=a.model,this.os=a.system,this.browserName=a.platform,this.browserVersion=a.version,this.monitorIp="",this.country="",this.province="",this.city="",this.loadType=e,this.loadTime=t,this.newStatus=n,this.referrer=(o||"").split("?")[0].replace("#","")}}class i{constructor(e){var t=getCurrentPages().length?getCurrentPages()[0].route:"App Launched";this.uploadType="CUS_LEAVE",this.webMonitorId="jeffery_webmonitor",this.leaveType=e,this.happenTime=(new Date).getTime(),this.simpleUrl=t,this.customerKey=utils.getCustomerKey()}}class s extends o{constructor(e,t,n,o){super();var a=r.getDevice();this.uploadType=e,this.infoType=t,this.pageKey=r.getPageKey(),this.deviceName=a.model,this.os=a.system,this.browserName=a.platform,this.browserVersion=a.version,this.monitorIp="",this.country="china",this.province="",this.city="",this.errorMessage=r.b64EncodeUnicode(n),this.errorStack=r.b64EncodeUnicode(o),this.browserInfo=""}}var c="";function u(){var e=r.isTodayBrowse("LAST_BROWSE_DATE"),t=(new Date).getTime();wx.setStorageSync("WM_PAGE_ENTRY_TIME",t);var n=getCurrentPages().length?getCurrentPages()[0].route:"App Launched",o=null,s=r.formatDate(t,"y-M-d"),c=encodeURIComponent(n),u=wx.getStorageSync("WM_VISIT_PAGE_COUNT");if(u){var g=u.split("$$$"),h=g[0],f=g[1],d=parseInt(g[2],10);s==f?c!=h&&1==d&&(wx.setStorageSync("WM_VISIT_PAGE_COUNT",c+"$$$"+s+"$$$2"),o=new i(2)):(wx.setStorageSync("WM_VISIT_PAGE_COUNT",c+"$$$"+s+"$$$1"),o=new i(1))}else wx.setStorageSync("WM_VISIT_PAGE_COUNT",c+"$$$"+s+"$$$1"),o=new i(1);var l=wx.getStorageSync("monitorCustomerKey");if(l){var y="",p=l?l.match(/\d{14}/g):[];if(p&&p.length>0){var w=p[0].match(/\d{2}/g),S=w[0]+w[1]+"-"+w[2]+"-"+w[3]+" "+w[4]+":"+w[5]+":"+w[6],m=new Date(S).getTime();y=(new Date).getTime()-m>300?0==e?"o_uv":"o":"n_uv"}}else y="n_uv",r.getCustomerKey();var v=new a("reload",0,y,"");if("n_uv"===y||"o_uv"===y){var x=[v,o];r.ajax("POST","http://&&&www.webfunny.cn&&&/server/upMog",x)}else v.handleLogInfo("CUSTOMER_PV",v)}function g(){if(getCurrentPages().length){var e=getCurrentPages()[0].route;c!=e&&(u(),c=e)}}function h(e,t,n,r,o,a){g();var i=new s("JS_ERROR",e,t||"",a||"");i.handleLogInfo("JS_ERROR",i)}wx.webfunny=function(e){var t=0;setInterval((function(){if(g(),t>=40){for(var e=[],o=0;o<n.length;o++){var a=wx.getStorageSync(n[o]);e=e.concat(a)}e.length>0&&r.ajax("POST","http://&&&www.webfunny.cn&&&/server/upMog",e,(function(){for(var e=0;e<n.length;e++)wx.setStorageSync(n[e],[])}),(function(){for(var e=0;e<n.length;e++)wx.setStorageSync(n[e],[])})),t=0}t++}),200);var o=Object.assign({},e,{onLaunch:function(){},onShow:function(){},onHide:function(){},onError:function(){},onPageNotFound:function(){},onUnhandledRejection:function(){}}),a={};for(var i in o)switch(i){case"onLaunch":a.onLaunch=function(t){u(),e.onLaunch(t)};break;case"onShow":a.onShow=function(t){"function"==typeof e.onShow&&e.onShow(t)};break;case"onHide":a.onHide=function(t){"function"==typeof e.onHide&&e.onHide(t)};break;case"onError":a.onError=function(t){console.log(t.split("\n"));var n=t.split("\n")[2];getCurrentPages().length&&getCurrentPages()[0].route;h("on_error",n,0,0,0,t),"function"==typeof e.onError&&e.onError(t)};break;case"onPageNotFound":a.onPageNotFound=function(t){"function"==typeof e.onPageNotFound&&e.onPageNotFound(t)};break;case"onUnhandledRejection":a.onUnhandledRejection=function(t){"function"==typeof e.onUnhandledRejection&&e.onUnhandledRejection(t)};break;default:a[i]=e[i]}return a}}]);